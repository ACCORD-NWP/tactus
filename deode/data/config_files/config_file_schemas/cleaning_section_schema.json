{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "CleaningSection",
    "description": "Model for validation of the cleaning configuration.",
    "type": "object",
    "additionalProperties": true,
    "properties": {
	        "defaults": {
                    "type": "object",
                    "properties": {
		        "include": {
                            "description": "regular experssion according to it which files to clean",
                            "type": "string"
                        },
                        "cleaning_delay": {
                             "description": "time period with which the cleaning is shifted to the experiment start day to the past",
                             "type": "string",
                             "pattern": "^P(?!$)(\\d+Y)?(\\d+M)?(\\d+W)?(\\d+D)?(T(?=\\d+[HMS])(\\d+H)?(\\d+M)?(\\d+S)?)?$"
                        },
                        "cleaning_max_delay": {
                             "description": "time period which defines the cleaning according to the cleaning_delay to the past ",
                             "type": "string",
                             "pattern": "^P(?!$)(\\d+Y)?(\\d+M)?(\\d+W)?(\\d+D)?(T(?=\\d+[HMS])(\\d+H)?(\\d+M)?(\\d+S)?)?$"
                        },
                        "step": {
                             "description": "time step which determines moments when to make a cleaning",
                             "type": "string",
                             "pattern": "^P(?!$)(\\d+Y)?(\\d+M)?(\\d+W)?(\\d+D)?(T(?=\\d+[HMS])(\\d+H)?(\\d+M)?(\\d+S)?)?$"
                        },
                        "active": {
                             "description": "Activate cleaning files",
                             "type": "boolean"
                        },
                        "dry_run": {
                             "description": "test cleaning without to  delete files",
                             "type": "boolean"
                        }		   
		    },
                    "required": ["include", "cleaning_delay", "cleaning_max_delay", "step", "active", "dry_run"]
                },    
                "wrk": {
                    "type": "object",
                    "properties": {"$ref" : "#/$CLEANING_FOLDER_SETTINGS" },
                    "required": ["path", "active"]
                },
                "archive": {
                    "type": "object",
                    "properties": { "$ref" : "#/$CLEANING_FOLDER_SETTINGS" },
		"required": ["path", "active"]
          }
       },  
        "required": ["defaults", "wrk", "archive"],
       "$CLEANING_FOLDER_SETTINGS": {
              "path": {
                            "description" : "path to the folder where files will be cleaned",
                            "type": "string"
               },	       
	       "include": {
                  "description": "regular experssion according to it which files to clean",
                      "type": "string"
               },
              "cleaning_delay": {
                  "description": "time period with which the cleaning is shifted to the experiment start day to the past",
                      "type": "string",
                      "pattern": "^P(?!$)(\\d+Y)?(\\d+M)?(\\d+W)?(\\d+D)?(T(?=\\d+[HMS])(\\d+H)?(\\d+M)?(\\d+S)?)?$"
                  },
              "cleaning_max_delay": {
                  "description": "time period which defines the cleaning according to the cleaning_delay to the past ",
                      "type": "string",
                       "pattern": "^P(?!$)(\\d+Y)?(\\d+M)?(\\d+W)?(\\d+D)?(T(?=\\d+[HMS])(\\d+H)?(\\d+M)?(\\d+S)?)?$"
                  },
              "step": {
                  "description": "time step which determines moments when to make a cleaning",
                      "type": "string",
                      "pattern": "^P(?!$)(\\d+Y)?(\\d+M)?(\\d+W)?(\\d+D)?(T(?=\\d+[HMS])(\\d+H)?(\\d+M)?(\\d+S)?)?$"
                  },
              "active": {
                  "description": "Activate cleaning files",
                      "type": "boolean"
                  },
              "dry_run": {
                   "description": "test cleaning without to  delete files",
                       "type": "boolean"
                   }

          }
    }
