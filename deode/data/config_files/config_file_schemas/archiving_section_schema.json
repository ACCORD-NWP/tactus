{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Archiving Section, defined in include/archiving.toml",
  "description": "Archiving settings for ATOS to ECFS. Locations, and time intervals to archive for each file type",
  "type": "object",
  "additionalProperties": true,
  "properties": {
    "prefix": {
      "title": "Path prefixes",
      "description": "Prefix to prepend paths. Like 'ec:/user/ for ecfs on atos or 'user@host:' for scp",
      "type": "object",
      "properties": {
        "archive_type": {
          "description": "Prefix to use for available archive types. Define one per type where applicable.",
          "type": "string"
        }
      },
      "hour": {
        "title": "Example settings for the 'ArchiveHour task",
        "description": "",
        "type": "object",
        "properties": {
          "example": {
            "title": "Example settings for the archiving rules. Any number of rules can be defined to accomodate the needs",
            "description": "",
            "type": "object",
            "properties": {
              "active": {
                "description": "Activates the default archiving. Could be boolean or string refering to a boolean in the config file. See the sqlite archiving for an example",
                "type": "boolean"
              },
              "inpath": {
                "description": "Location of input files for archiving",
                "type": "string"
              },
              "outpath": {
                "description": "Relative location of the archived files",
                "type": "string"
              },
              "pattern": {
                "description": "Search pattern for files to be included. Could be a single pattern or list of patterns.",
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ]
              },
              "newname": {
                "description": "Target name for renaming of files. Only works is pattern is a string and matches an existing file",
                "type": "string"
              }
            }
          }
        }
      }
    }
  },
  "$archive_timestep_setting_rules": {
    "anyOf": [
      {
        "type": "string",
        "format": "duration"
      },
      {
        "type": "array",
        "items": {
          "type": "string",
          "format": "duration_slice"
        }
      }
    ]
  }
}
