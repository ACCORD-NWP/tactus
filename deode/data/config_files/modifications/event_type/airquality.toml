[general]
  event_type = "airquality"

[archiving.FDB.fdb.surfex_grib2]
  active = false
  inpath = "@ARCHIVE@"
  pattern = "GRIB@CNMEXP@*sfx"

[creategrib.CreateGrib]
  conversions = ["surfex", "history", "tiles"]

[creategrib.CreateGrib.history]
  output_format = "FA2GRIB2"

[creategrib.CreateGrib.history.ALARO]
  namelist = [
    "outgeo%center=85",
    "READKEY%FANAME='SPECSURFGEOPOTEN','SURFFLU.LAT.MEVA','SURFFLU.LAT.MSUB','SURFFLU.CHA.SENS','SURFFLU.RAY.SOLA','SURFRAYT SOLA DE'",
  ]

[creategrib.CreateGrib.history.AROME]
  namelist = [
    "outgeo%center=85",
    "READKEY%FANAME='SPECSURFGEOPOTEN','SURFFLU.LAT.MEVA','SURFFLU.LAT.MSUB','SURFFLU.CHA.SENS','SURFFLU.RAY.SOLA','SURFRAYT SOLA DE'",
  ]

[creategrib.CreateGrib.history.HARMONIE_AROME]
  namelist = [
    "outgeo%center=85",
    "READKEY%FANAME='SPECSURFGEOPOTEN','SURFFLU.LAT.MEVA','SURFFLU.LAT.MSUB','SURFFLU.CHA.SENS','SURFFLU.RAY.SOLA','SURFRAYT SOLA DE'",
  ]

[creategrib.CreateGrib.surfex]
  output_format = "FA2GRIB2"

[creategrib.CreateGrib.surfex.AROME]
  namelist = [
    "outgeo%center=85",
    "READKEY%FANAME='SFX.SST','SFX.TS','SFX.CD','SFX.Z0','SFX.Q2M'",
  ]

[creategrib.CreateGrib.surfex.HARMONIE_AROME]
  namelist = [
    "outgeo%center=85",
    "READKEY%FANAME='SFX.SIC','SFX.SST','SFX.TS','SFX.CD','SFX.Z0','SFX.QS'",
  ]

[creategrib.CreateGrib.tiles]
  output_format = "FA2GRIB2"
  output_frequency_reference = "surfex"

[creategrib.CreateGrib.tiles.AROME]
  namelist = [
    "outgeo%center=85",
    "READKEY%FANAME='SFX.WG1P1','SFX.WG1P2','SFX.WG1P3','SFX.WG2P1','SFX.WG2P2','SFX.WG2P3','SFX.WG3P1','SFX.WG3P2','SFX.WG3P3','SFX.WG4P1','SFX.WG4P2','SFX.WG4P3','SFX.WG5P1','SFX.WG5P2','SFX.WG5P3','SFX.WG6P1','SFX.WG6P2','SFX.WG6P3','SFX.WG7P1','SFX.WG7P2','SFX.WG7P3','SFX.WG8P1','SFX.WG8P2','SFX.WG8P3','SFX.TG1P1','SFX.TG1P2','SFX.TG1P3','SFX.TG2P1','SFX.TG2P2','SFX.TG2P3','SFX.TG3P1','SFX.TG3P2','SFX.TG3P3','SFX.TG4P1','SFX.TG4P2','SFX.TG4P3','SFX.TG5P1','SFX.TG5P2','SFX.TG5P3','SFX.TG6P1','SFX.TG6P2','SFX.TG6P3','SFX.TG7P1','SFX.TG7P2','SFX.TG7P3','SFX.TG8P1','SFX.TG8P2','SFX.TG8P3','SFX.PATCHP1','SFX.PATCHP2','SFX.PATCHP3','SFX.LAI_ISBA','SFX.WRP1','SFX.WRP2','SFX.WRP3'",
  ]

[creategrib.CreateGrib.tiles.HARMONIE_AROME]
  namelist = [
    "outgeo%center=85",
    "READKEY%FANAME='X001WG1','X002WG1','X003WG1','X001WG2','X002WG2','X003WG2','X001WG3','X002WG3','X003WG3','X001WG4','X002WG4','X003WG4','X001WG5','X002WG5','X003WG5','X001WG6','X002WG6','X003WG6','X001WG7','X002WG7','X003WG7','X001WG8','X002WG8','X003WG8','X001TG1','X002TG1','X003TG1','X001TG2','X002TG2','X003TG2','X001TG3','X002TG3','X003TG3','X001TG4','X002TG4','X003TG4','X001TG5','X002TG5','X003TG5','X001TG6','X002TG6','X003TG6','X001TG7','X002TG7','X003TG7','X001TG8','X002TG8','X003TG8','X001PATCH','X002PATCH','X003PATCH','SFX.WG_D2_ISBA','SFX.LAI_ISBA','X001WR','X002WR','X003WR','SFX.WG1P1','SFX.WG1P2','SFX.WG1P3','SFX.WG2P1','SFX.WG2P2','SFX.WG2P3','SFX.WG3P1','SFX.WG3P2','SFX.WG3P3','SFX.WG4P1','SFX.WG4P2','SFX.WG4P3','SFX.WG5P1','SFX.WG5P2','SFX.WG5P3','SFX.WG6P1','SFX.WG6P2','SFX.WG6P3','SFX.WG7P1','SFX.WG7P2','SFX.WG7P3','SFX.WG8P1','SFX.WG8P2','SFX.WG8P3','SFX.TG1P1','SFX.TG1P2','SFX.TG1P3','SFX.TG2P1','SFX.TG2P2','SFX.TG2P3','SFX.TG3P1','SFX.TG3P2','SFX.TG3P3','SFX.TG4P1','SFX.TG4P2','SFX.TG4P3','SFX.TG5P1','SFX.TG5P2','SFX.TG5P3','SFX.TG6P1','SFX.TG6P2','SFX.TG6P3','SFX.TG7P1','SFX.TG7P2','SFX.TG7P3','SFX.TG8P1','SFX.TG8P2','SFX.TG8P3','SFX.PATCHP1','SFX.PATCHP2','SFX.PATCHP3','SFX.WRP1','SFX.WRP2','SFX.WRP3'",
  ]

[creategrib.CreateGribStatic.pgd]
  files_in = ["@CLIMDIR@/@PGD_ARCHIVE@"]
  files_out = ["@CLIMDIR@/@PGD_ARCHIVE@.grib1"]
  namelist = [
    "READKEY%FANAME= 'SFX.FRAC_SEA','SFX.FRAC_NATURE','SFX.FRAC_WATER','SFX.FRAC_TOWN','SFX.COVER001', 'SFX.COVER002', 'SFX.COVER003', 'SFX.COVER004', 'SFX.COVER005', 'SFX.COVER006', 'SFX.COVER007', 'SFX.COVER008', 'SFX.COVER009', 'SFX.COVER010', 'SFX.COVER011', 'SFX.COVER012', 'SFX.COVER013', 'SFX.COVER014', 'SFX.COVER015', 'SFX.COVER016', 'SFX.COVER017', 'SFX.COVER018', 'SFX.COVER019', 'SFX.COVER020', 'SFX.COVER021', 'SFX.COVER022', 'SFX.COVER023', 'SFX.COVER024', 'SFX.COVER025', 'SFX.COVER026', 'SFX.COVER027', 'SFX.COVER028', 'SFX.COVER029', 'SFX.COVER030', 'SFX.COVER031', 'SFX.COVER032', 'SFX.COVER033','SFX.CLAY','SFX.SAND'",
  ]
  output_format = "GRIB"

[creategrib.CreateGribStatic.pgd_grib2]
  files_in = ["@CLIMDIR@/@PGD_ARCHIVE@"]
  files_out = ["@CLIMDIR@/@PGD_ARCHIVE@.grib2"]
  namelist = ["outgeo%center=85", "READKEY%FANAME= 'SFX.FRAC_NATURE'"]
  output_format = "FA2GRIB2"

[fullpos.selection]
  aq = ["aq_selection_@CSC@"]

[gribmodify]
  conversions = ["fullpos", "surfex"]

[gribmodify.surfex.1]
  output_name = "lai"

[gribmodify.surfex.2]
  output_name = "al"

[gribmodify.surfex.3]
  output_name = "soil_moisture_top20cm"

[gribmodify.surfex.4]
  output_name = "soil_moisture_top100cm"

[gribmodify.surfex.5]
  output_name = "soil_temperature_top20cm"

[gribmodify.surfex.6]
  output_name = "soil_temperature_top100cm"

[gribmodify.surfex.7]
  csc_specific = ["harmonie_arome"]
  output_name = "root_depth_soil_moisture"

[gribmodify.surfex.8]
  output_name = "canopy_water"

[suite_control]
  do_creategrib_static = true
