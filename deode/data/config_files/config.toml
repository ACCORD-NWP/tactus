[general]
 case = "@CYCLE@_@CSC@"
 cnmexp = "DEOD"
 realization = -1
 tstep = 75
 loglevel = "info"
 csc = "HARMONIE_AROME"
 cycle = "CY46h1"
 surfex = true
 forecast_range = "PT12H"
 keep_workdirs = true
 accept_static_namelists = false
 nproma = -32

[boundaries]
 bdint = "PT3H"
 bdshift = "PT0H"
 bdcycle = "PT12H"
 bdmodel = "ifs"
 bd_has_surfex = false
 bdmax = 12

[general.output_settings]
 history = ["PT1H:PT12H:PT1H"]
 fullpos = ["PT6H:PT15M", "PT9H:PT30M", "PT1H"]
 surfex = ["PT3H:PT1H", "PT9H:PT24H:PT3H"]

[suite_control]
 create_static_data = true
 create_time_dependent_suite = true
 do_soil = true
 do_pgd = true
 do_prep = true
 interpolate_boundaries = true

[file_templates]
 duration_grib = "@LLLH@h@LM@m@LS@s"
 duration_fa = "@LLLH@:@LM@:@LS@"
 history = "ICMSH@CNMEXP@+@DURATION_FA@"
 surfex = "ICMSH@CNMEXP@+@DURATION_FA@.sfx"
 fullpos = "GRIBPF@CNMEXP@@DOMAIN@+@DURATION_FA@"

[macros]
 os_macros = ["USER", "HOME", "PWD"]
 group_macros = ["platform","system"]
 gen_macros = ["general.cnmexp",
               "general.cycle",
               "general.csc",
               "file_templates.duration_grib",
               "file_templates.duration_fa",
               { surfex_template = "file_templates.surfex" },
               { case = "general.case" },
               { domain = "domain.name" },
               { rrr = "general.realization" } ]


[system]
 wrk = "@SCRATCH@/deode/@CASE@/@YYYY@@MM@@DD@_@HH@@mm@"
 archive = "@ARCHIVE_ROOT@/@YYYY@/@MM@/@DD@/@HH@/"
 bddir = "/scratch/sism/DEOL/@YYYY@/@MM@/@DD@/@HH@"
 intp_bddir = "@WRK@"
 bdfile_template = "PFIFSDEOL+@LLLL@"
 bddir_sfx = "/home/snh02/work/dev-CY46h1_deode/boundaries/HRES/@YYYY@/@MM@/@DD@/@HH@"
 bdfile_sfx_template = "fc@YYYY@@MM@@DD@_@HH@+@LLL@"
 climdir = "@SCRATCH@/deode/@CASE@/climate/@DOMAIN@"
 bdclimdir = "/home/snh02/work/dev-CY46h1_deode/climate/DEODE_LARGE"
 bindir = "/home/snh02/work/dev-CY46h1_deode/bin/2023-03-29"
 fullpos_config_file = "@DEODE_HOME@/deode/namelist_generation_input/@CYCLE@/fullpos_namelist.yml"
 sfx_input_defs = "@DEODE_HOME@/deode/data/input/sfx_input_@CYCLE@.json"
 namelists = "@DEODE_HOME@/deode/data/namelists/@CYCLE@"


[general.times]
 basetime = "2023-02-19T00:00:00Z"
 validtime = "2023-02-19T00:00:00Z"
 start = "2023-02-19T00:00:00Z"
 end = "2023-02-19T03:00:00Z"
 cycle_length = "PT3H"
 
[task]
 wrapper = ""

[task.args]
 bd_nr = "1"
 bd_time = "2023-02-19T09:00:00Z"

[task.creategrib.conversions.surfex]
 input_template = "@SURFEX_TEMPLATE@"
 output_template = "sfx_@YYYY@-@MM@-@DD@T@HH@:@mm@:@ss@+@DURATION_GRIB@.grib" 

[troika]
config_file = "@DEODE_HOME@/deode/data/config_files/troika.yml"


[include]
domain = "include/domain.toml"
platform = "include/platform.toml"
submission = "include/submission.toml"
vertical_levels = "include/vertical_levels.toml"
