{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Scheduler Section, defined in files under include/scheduler",
  "description": "Settings for implemented schedulers",
  "type": "object",
  "additionalProperties": true,
  "properties": {
    "ecfvars": {
      "title": "Ecflow HPC scheduler Section, defined in files under include/scheduler",
      "description": "TACTUS HPC specific ecflow settings",
      "type": "object",
      "properties": {
        "ecf_ssl": {
          "type": "string",
          "description": "Ecflow comminucation using SSL",
          "default": "0"
        },
        "ecf_tries": {
          "type": "integer",
          "description": "Ecflow tries.",
          "default": 1
        },
        "ecf_host": {
          "type": "string",
          "description": "Ecflow host. HPC dependent."
        },
        "ecf_host_resolved": {
          "type": "string",
          "description": "Resolved Ecflow host for downstream usage",
          "default": ""
        },
        "ecf_port": {
          "description": "Ecflow port, HPC or user dependet. To set depending on userid use `_set_port_from_user(offset)` where offset is an interger to be added to the userid ",
          "type": ["integer", "string"],
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "string",
              "pattern": "_set_port_from_user\\((\\d+)\\)"
            },
            {
              "type": "string",
              "pattern": "_set_port_from_json\\((.*),\\)"
            }
          ]
        },
        "ecf_port_resolved": {
          "description": "Parsed ecflow port for communication",
          "default": "",
          "type": ["integer", "string"],
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "string"
            }
          ]
        },
        "ecf_jobout": {
          "type": "string",
          "description": "Path to Ecflow job output."
        },
        "ecf_files": {
          "type": "string",
          "description": "Path to Ecflow operating files."
        },
        "ecf_files_remotely": {
          "type": "string",
          "description": "Path to Ecflow operating files if in remote location, different to ecf_files."
        },
        "ecf_home": {
          "type": "string",
          "description": "Path to Ecflow home."
        },
        "ecf_user": {
          "type": "string",
          "description": "Ecflow user, only set when required",
          "default": ""
        },
        "ecf_remoteuser": {
          "type": "string",
          "description": "Ecflow remote user, only set when required",
          "default": ""
        },
        "ecf_tactus_home": {
          "type": "string",
          "description": "tactus home directory stripped for parts specific to where a node is mounted on a cluster"
        }
      }
    },
    "mirror_globalDT": {
        "title": "Settings to mirror globalDT",
        "type": "object",
        "properties": {
           "check_var": {
             "type": "string",
             "description": "Remote variable (like YMD) that is checked for triggering. Leave empty if not required.",
             "default": ""
           },
           "mirror_name": {
             "type": "string",
             "description": "Name for the mirror in ecflow",
             "default": ""
           },
           "remote_auth": {
             "type": "string",
             "description": "the location to the Mirror authentication credentials file, if required",
             "default": ""
           },
            "remote_host": {
             "type": "string",
             "description": "the remote ecFlow server host",
             "default": ""
           },
           "remote_path": {
             "type": "string",
             "description": "the path of the node on the remote ecFlow server",
             "default": ""
           },
           "remote_port": {
             "type": "string",
             "description": "the remote ecFlow server port",
             "default": ""
           },
           "remote_polling": {
             "type": "string",
             "description": "the value (in seconds) used to periodically contact the remote ecFlow server",
             "default": ""
           },
           "remote_ssl": {
             "type": "boolean",
             "description": "to connect to the ecFlow server using SSL",
             "default": false
           }
        }
    },
    "mirror_offline": {
        "title": "Settings to mirror offlineSFX",
        "type": "object",
        "properties": {
           "check_var": {
             "type": "string",
             "description": "Remote variable (like YMD) that is checked for triggering. Leave empty if not required.",
             "default": ""
           },
           "mirror_name": {
             "type": "string",
             "description": "Name for the mirror in ecflow",
             "default": ""
           },
           "remote_auth": {
             "type": "string",
             "description": "the location to the Mirror authentication credentials file, if required",
             "default": ""
           },
            "remote_host": {
             "type": "string",
             "description": "the remote ecFlow server host",
             "default": ""
           },
           "remote_path": {
             "type": "string",
             "description": "the path of the node on the remote ecFlow server",
             "default": ""
           },
           "remote_port": {
             "type": "string",
             "description": "the remote ecFlow server port",
             "default": ""
           },
           "remote_polling": {
             "type": "string",
             "description": "the value (in seconds) used to periodically contact the remote ecFlow server",
             "default": ""
           },
           "remote_ssl": {
             "type": "boolean",
             "description": "to connect to the ecFlow server using SSL",
             "default": false
           }
        }
    },
    "mirror_host_case": {
        "title": "Settings to mirror a host case",
        "type": "object",
        "properties": {
           "check_var": {
             "type": "string",
             "description": "Remote variable (like YMD) that is checked for triggering. Leave empty if not required.",
             "default": ""
           },
           "mirror_name": {
             "type": "string",
             "description": "Name for the mirror in ecflow",
             "default": ""
           },
           "remote_auth": {
             "type": "string",
             "description": "the location to the Mirror authentication credentials file, if required",
             "default": ""
           },
            "remote_host": {
             "type": "string",
             "description": "the remote ecFlow server host",
             "default": ""
           },
           "remote_path": {
             "type": "string",
             "description": "the path of the node on the remote ecFlow server",
             "default": ""
           },
           "remote_port": {
             "type": "string",
             "description": "the remote ecFlow server port",
             "default": ""
           },
           "remote_polling": {
             "type": "string",
             "description": "the value (in seconds) used to periodically contact the remote ecFlow server",
             "default": ""
           },
           "remote_ssl": {
             "type": "boolean",
             "description": "to connect to the ecFlow server using SSL",
             "default": false
           }
        }
    }
  }
}
